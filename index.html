<html>
<head>
  <title>Hello World</title>
  <style>
    #offline{
      display: none;
    }
    .active{
      display: block;
    }
  </style>
</head>
<body>
  <div id="offline" class="active"></div>
  Hello World
  <script type="text/javascript">
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/worker.js').then( function(reg) {
        console.log('◕‿◕', reg);

        var _worker = registration.installing;

        // statechange fires every time the ServiceWorker.state changes
        _worker.onstatechange = function() {
          if (newWorker.state == 'activated' && !navigator.serviceWorker.controller) {
            document.querySelector('#offline').classList.add('active');
          }
        };

      }, function(err) {
        console.log('ಠ_ಠ', err);
      });
    }
  </script>
</body>
</html>
